<h1 class="ml-3">Create Schema</h1>

<form>
  <div class="flex gap-2">
    <mat-form-field appearance="fill">
      <mat-label>Key</mat-label>
      <input
        matInput
        name="key"
        [(ngModel)]="form.key"
        placeholder="Placeholder"
      />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Name</mat-label>
      <input
        matInput
        name="name"
        [(ngModel)]="form.name"
        placeholder="Placeholder"
      />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Schema Type</mat-label>
      <mat-select name="schema" [(ngModel)]="form.type">
        <mat-option
          *ngFor="let option of ['SINGLE', 'COLLECTION']"
          [value]="option"
          >{{ option }}</mat-option
        >
      </mat-select>
    </mat-form-field>
  </div>
  <div>Fields</div>
  <ng-container *ngFor="let field of form.fields; let i = index">
    <div class="flex gap-2">
      <mat-form-field appearance="fill">
        <mat-label>Key</mat-label>
        <input matInput name="key-{{i}}" [(ngModel)]="field.key" placeholder="Key" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Label</mat-label>
        <input matInput  name="label-{{i}}" [(ngModel)]="field.label" placeholder="Label" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Field Type</mat-label>
        <mat-select  name="type-{{i}}" [(ngModel)]="field.type">
          <mat-option
            *ngFor="let option of fieldTypeOptions"
            [value]="option"
            >{{ option }}</mat-option
          >
        </mat-select>
      </mat-form-field>
      <button
        mat-icon-button
        (click)="addField()"
        color="primary"
        *ngIf="i == form.fields.length - 1"
      >
        <mat-icon>add</mat-icon>
      </button>
      <button
        mat-icon-button
        color="primary"
        (click)="deleteField(i)"
        *ngIf="i != form.fields.length - 1"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </ng-container>

  <button mat-raised-button color="primary" (click)="handleSave()">
    Create Schema
  </button>


  <div>{{form | json }}</div>
</form>
